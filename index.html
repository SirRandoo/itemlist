---
layout: page
title: Store
---

<link rel="stylesheet" href="{{- 'assets/css/core.css' | relative_url -}} " />
<script src="{{- 'assets/js/tabs.js' | relative_url -}}"></script>
<script src="{{- 'assets/js/filter.js' | relative_url -}}"></script>
<script src="https://www.kryogenix.org/code/browser/sorttable/sorttable.js"></script>


{%- assign itemsForDisplay = site.data.StoreItems.items | where_exp: "item", "item.category != 'Animal'" | where_exp: "item", "item.price > 0" | sort: "abr" -%}
{%- assign eventsForDisplay = site.data.StoreIncidents.incitems | where_exp: "incident", "incident.price > 0" | sort: "abr" -%}
{%- assign animalsForDisplay = site.data.StoreItems.items | where: "category", "Animal" | where_exp: "animal", "animal.price > 0" | sort: "abr" -%}
{%- assign traitsForDisplay = site.data.ShopExt.traits | sort: "name" -%}
{%- assign kindsForDisplay = site.data.ShopExt.races | where: "enabled", "true" | sort: "name" -%}
{%- assign displayableTraitCount = 0 -%}

{%- for trait in traitsForDisplay -%}
{%- if trait.canAdd or trait.canRemove -%}
{%- assign displayableTraitCount = displayableTraitCount | plus: 1 -%}
{%- endif -%}
{%- endfor -%}

<div class="tab">
    {%- if itemsForDisplay.size > 0 -%}
    <button class="tabLinks" onclick="changeTab(event, 'items')"
        id="defaultOpen">{{- site.data.language.str_items -}}</button>
    {%- endif -%}

    {%- if eventsForDisplay.size > 0 -%}
    <button class="tabLinks" onclick="changeTab(event, 'events')">{{- site.data.language.str_events -}}</button>
    {%- endif -%}

    {%- if animalsForDisplay.size > 0 -%}
    <button class="tabLinks" onclick="changeTab(event, 'animals')">{{- site.data.language.str_animals -}}</button>
    {%- endif -%}

    {%- if displayableTraitCount > 0 -%}
    <button class="tabLinks" onclick="changeTab(event, 'traits')">{{- site.data.language.str_traits -}}</button>
    {%- endif -%}

    {%- if kindsForDisplay.size > 0 -%}
    <button class="tabLinks" onclick="changeTab(event, 'kinds')">{{- site.data.language.str_kinds -}}</button>
    {%- endif -%}
</div>

{%- if itemsForDisplay.size > 0 -%}
<div id="items" class="tabContent">
    <input type="text" class="search" id="itemsInput" onkeyup="filterTable('items')"
        placeholder="{{- site.data.language.str_items_search -}}">

    <table style="display: table" class="sortable">
        <thead>
            <tr>
                <th>Name</th>
                <th>Cost</th>
                <th>Category</th>
            </tr>
        </thead>

        <tbody>
            {%- for item in itemsForDisplay -%}
            <tr>
                <td>{{- item.abr -}}</td>
                <td>{{- item.price -}}</td>
                <td>{{- item.category -}}</td>
            </tr>
            {%- endfor -%}
        </tbody>
    </table>
</div>
{%- endif -%}

{%- if eventsForDisplay.size > 0 -%}
<div id="events" class="tabContent">
    <input type="text" class="search" id="eventsInput" onkeyup="filterTable('events')"
        placeholder="{{- site.data.language.str_events_search -}}">

    <table class="sortable">
        <thead>
            <tr>
                <th>Name</th>
                <th>Cost</th>
                <th>Karma Type</th>
            </tr>
        </thead>

        <tbody>
            {%- for item in eventsForDisplay -%}
            <tr>
                <td>{{- item.abr -}}</td>
                {%- if item.abr == site.data.language.str_trait_id or item.abr == site.data.language.str_removetrait_id -%}
                <td>{{- site.data.language.str_seetraits -}}</td>
                {%- elsif item.abr == site.data.language.str_pawn_id -%}
                <td>{{- site.data.language.str_seekinds -}}</td>
                {%- else -%}
                <td>{{- item.price -}}</td>
                {%- endif -%}
                <td>{{- item.karmatype -}}</td>
            </tr>
            {%- endfor -%}
        </tbody>
    </table>
</div>
{%- endif -%}

{%- if animalsForDisplay.size > 0 -%}
<div id="animals" class="tabContent">
    <input type="text" class="search" id="animalsInput" onkeyup="filterTable('animals')"
        placeholder="{{- site.data.language.str_events_search -}}">

    <table class="sortable">
        <thead>
            <tr>
                <th>Name</th>
                <th>Cost</th>
            </tr>
        </thead>

        <tbody>
            {%- for item in animalsForDisplay -%}
            <tr>
                <td>{{- item.abr -}}</td>
                <td>{{- item.price -}}</td>
            </tr>
            {%- endfor -%}
        </tbody>
    </table>
</div>
{%- endif -%}

{%- if displayableTraitCount > 0 -%}
<div id="traits" class="tabContent">
    <input type="text" class="search" id="traitsInput" onkeyup="filterTable('traits')"
        placeholder="{{- site.data.language.str_traits_search -}}">

    <table class="sortable">
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th class="price">Add Cost</th>
                <th class="price">Remove Cost</th>
            </tr>
        </thead>

        <tbody>
            {%- for trait in traitsForDisplay -%}
            {%- if trait.canAdd == false and trait.canRemove == false -%}
            {%- continue -%}
            {%- endif -%}
            <tr>
                <td>{{- trait.name | capitalize -}}</td>
                <td class="description">
                    {{- trait.description -}}

                    {%- capture temp -%}
                    {{- trait.stats | first -}}
                    {%- endcapture -%}

                    {%- if temp != "" -%}
                    <span class="stats">
                        <br />
                        <br />
                        {{- site.data.language.str_trait_stats -}}

                        <ul>
                            {%- for stat in trait.stats -%}
                            <li>{{- stat -}}</li>
                            {%- endfor -%}
                        </ul>
                    </span>
                    {%- endif -%}

                    {%- capture nameTemp -%}
                    {{- trait.conflicts | first -}}
                    {%- endcapture -%}

                    {%- if nameTemp != "" -%}
                    <span class="stats">
                        {%- if temp == "" -%}
                        <br />
                        <br />
                        {%- endif -%}

                        {{- site.data.language.str_trait_conflicts -}}

                        <ul>
                            {%- for c in trait.conflicts -%}
                            <li>{{- c -}}</li>
                            {%- endfor -%}
                        </ul>
                    </span>
                    {%- endif -%}
                </td>

                {%- if trait.canAdd -%}
                <td>{{- trait.addPrice -}}</td>
                {%- else -%}
                <td>{{- site.data.language.str_disabled -}}</td>
                {%- endif -%}

                {%- if trait.canRemove -%}
                <td>{{- trait.removePrice -}}</td>
                {%- else -%}
                <td>{{- site.data.language.str_disabled -}}</td>
                {%- endif -%}
            </tr>
            {%- endfor -%}
        </tbody>
    </table>
</div>
{%- endif -%}

{%- if kindsForDisplay.size > 0 -%}
<div id="kinds" class="tabContent">
    <input type="text" class="search" id="kindsInput" onkeyup="filterTable('kinds')"
        placeholder="{{- site.data.language.str_kinds_search -}}">

    <table class="sortable">
        <thead>
            <tr>
                <th>Name</th>
                <th>Cost</th>
            </tr>
        </thead>

        <tbody>
            {%- for item in kindsForDisplay-%}
            <tr>
                <td>{{- item.name -}}</td>
                <td>{{- item.price -}}</td>
            </tr>
            {%- endfor -%}
        </tbody>
    </table>
</div>
{%- endif -%}



<script>
    window.addEventListener("load", function (event) {
        var query = "";
        var queryStarted = false;
        var tab = "items";
        var url = document.URL;

        for (var i = 0; i < url.length; i++) {
            var e = url[i];

            if (e == "?") {
                queryStarted = true;
                continue;
            }

            if (e == "#" || e == "/") {
                queryStarted = false;
                continue;
            }

            if (queryStarted) {
                query = query + e;
            }
        }

        if (query.length <= 0) {
            return document.getElementById("defaultOpen").click();
        }

        var segments = query.split("&");
        for (var i = 0; i < segments.length; i++) {
            var e = segments[i].split('=');

            if (e[1] == null || e[1] == "") {
                continue;
            }

            if (e[0].toUpperCase() == "TAB") {
                return changeTab({ currentTarget: document.getElementById(e[1]) }, e[1])
            }
        }

        return document.getElementById("defaultOpen").click();
    });
</script>
